## 重构背景

> moreEdit 本身就是一个表单，一个能显示读取数据，设置设备属性的表单
> 但不是一般的表单 1 表单的 UI 和设备有依赖关系 2 表单的提交不是一个请求，不同的设备有多个不同请求

## 解决思路

> 基于以上很明显一点是：无论 UI 还是逻辑都和设备有关系，这就需要让每个设备有一个 UI 配置表
> 配置表选择用 json 而不是 jsonSchema, 原因是当前表单最需要的是依赖关系，验证完全不需要，jsonSchema 会把事情变得更复杂

## UI 设计

> UI = config.json + 组件
> 设计一个 json 能管理每个设备要显隐的字段关系，之前也是这么做，但是不够精细，没有达到每个字段
> 这里有个问题，如果精细到每个字段，如何保持这份 json 的精简（不想这么做
> 这部分改动不大，甚至可以不改，会重新考虑配置数据，以及 UI 与逻辑分离，相关组件的调整

## 逻辑处理设计

> 逻辑 = 容器组件 + action + 中间协议层 + 数据转换
> 这部分可以完全参考 sensorGroup 区别点在于请求参数和设备有关系，如何处理这种关联
> 协议层数据的封装(请求流程 数据转换处理)
> 这部分是重构重点，修改完这部分数据，以后维护只需要关注 config 配置表控制 UI，传参控制请求

### 具体

// TODO 添加文档

#### 关于字段的命名约定(NOTE)

> 小驼峰命名法 比如 字段 Swith off Delay 命名为 switchOffDelay
> 此约定的优点在于避免关键字包含空格
> 缺点是涉及界面显示可能要再映射一次
> 解决方法可以把字段映射表抽取出来，通过映射表转换，不要硬编码

#### 可能用到字段的位置

> redux 消费：作为 redux 存储数据的关键字 key
> 页面消费： 作为页面的显示以及控制其他字段显示与隐藏的控制变量
> 中间协议层消费：作为转换数据的关键字 key

## 如何添加新设备

1 确定设备类型(当前之前设备类型 sensorGroup acsensor 高阶 低阶)
2 把设备信息配置到 config 文件（通过 config 配置文件管理界面和请求(原则)
3 如果当前的 UI 不能满足，需要自行开发 通过 config 处理依赖关系
4 如果当前的 requestConfig 不能满足功能， 需要自行配置 config, 甚至添加中间协议层的数据转换
